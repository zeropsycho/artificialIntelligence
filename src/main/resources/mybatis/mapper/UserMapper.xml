<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.consumer.dao.UserDao">

    <resultMap id="baseUser" type="User">
        <id column="id" jdbcType="BIGINT" property="id" />
        <result column="username" jdbcType="VARCHAR" property="userName" />
        <result column="password" jdbcType="VARCHAR"  property="passWord" />
        <result column="create" jdbcType="DATE" property="create" />
        <result column="update" jdbcType="DATE" property="update" />
    </resultMap>
    <!--录入人员信息-->
    <insert id="saveUser" parameterType="User">
        INSERT INTO user_test.u_user(`username`, `password`, `create`, `update`)
        VALUES(
        <if test="userName != null">
            #{userName, jdbcType=VARCHAR},
        </if>
        <if test="passWord != null">
            #{passWord, jdbcType=VARCHAR},
        </if>
        now(),
        now()
        )
    </insert>
    <!--根据id修改用户信息-->
    <update id="updateUserById" parameterType="User">
        UPDATE u_user SET
        <if test="username != null">
            `username` = #{userName, jdbcType=VARCHAR},
        </if>
        <if test="password != null">
            `password` = #{passWord, jdbcType=VARCHAR},
        </if>
        `update` = now();
        WHERE id = #{id, jdbcType=INTEGER}
    </update>
</mapper>
